Файлы first.cpp, second.cpp и third.cpp компилируются без проблем.

При компоновке лишние определения функции foo будут отброшены.

Программа компилируется и компонуется без проблем.